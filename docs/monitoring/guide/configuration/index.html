

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="Description">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <!-- <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script> -->
    <link rel="stylesheet" href="https://unpkg.com/docsify/lib/themes/vue.css">
    <link rel="stylesheet" href="https://unpkg.com/docsify-copy-code/styles.css">
    <link rel=“prefetch” href="https://fonts.googleapis.com/css?family=Roboto:400,500">
    <link rel="stylesheet" href="/assets/css/normalize.css">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="/assets/css/bundle.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
    <link rel="stylesheet" href="//unpkg.com/gitalk/dist/gitalk.css">
</head>

<body class="ready sticky">

    <template id="sidebar2-template">
    <div class="sidebar_2_wrapper">
        <div class="sidebar_2">
            <a href="/runtime/overview" data-page="runtime-page">
                <div class="sidebar_2_item sidebar_2_item_runtime">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-r.png">
                    <div class="sidebar_2_item__text">Runtime</div>
                </div>
            </a>
            <a href="/monitoring/overview" data-page="monitoring-page">
                <div class="sidebar_2_item sidebar_2_item_monitoring">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-m.png">
                    <div class="sidebar_2_item__text">Monitoring</div>
                </div>
            </a>
            <a href="/enterprise/overview" data-page="enterprise-page">
                <div class="sidebar_2_item sidebar_2_item_enterprise">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-e.png">
                    <div class="sidebar_2_item__text">Enterprise</div>
                </div>
            </a>
        </div>
        <div class="main_content">
        </div>
    </div>
</template>
<div class="footer-fixed-box"></div>
<div class="section header-section">
    <div class=" header-container">
        <div class="PM2_logo_wrapper">
            <a class="logo-container link">
                <div class="PM2_logo"></div>
            </a>
        </div>
        <div class="PM2_search search-wrapper">
            <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input class="search_input ds-input" placeholder="Search documentation..." autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Blender, sans-serif; font-size: 18px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre><span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;"><div class="ds-dataset-1"></div></span></span>
            <div class="PM2_search_icon"><i class="fas fa-search"></i></div>
            <div id="hits" class="algolia-results">
                <!-- Hits widget will appear here -->
            </div>
        </div>
    </div>
</div>
<nav class="app-nav no-badge">
    <!--navbar-->
</nav>

    <!-- MAIN-CONTENT AREA -->
    <main>
        <aside class="sidebar">
    <div class="sidebar_2_wrapper">
        <div class="sidebar_2">
            <a href="/runtime/overview" data-page="runtime-page">
                <div class="sidebar_2_item sidebar_2_item_runtime">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-r.png">
                    <div class="sidebar_2_item__text">Runtime</div>
                </div>
            </a>
            <a href="/monitoring/overview" data-page="monitoring-page">
                <div class="sidebar_2_item sidebar_2_item_monitoring">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-m.png">
                    <div class="sidebar_2_item__text">Monitoring</div>
                </div>
            </a>
            <a href="/enterprise/overview" data-page="enterprise-page">
                <div class="sidebar_2_item sidebar_2_item_enterprise">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-e.png">
                    <div class="sidebar_2_item__text">Enterprise</div>
                </div>
            </a>
        <div class="lang-selector">
          <!-- Adds links to other languages on the post -->
          
            
          
            
              
                <a href="/ch/monitoring/guide/configuration/" >Language: <br>Chinese (中文版)</a>
              

              

              

            
          
        </div>
        </div>
        <div class="main_content">
        </div>
    </div>
    <div class="sidebar-nav">

    <ul id="acc">
    
    
    
    
    
        <li class="">
            <a href="/monitoring/overview/">Overview</a>
            
        </li>
    
    
    
    
        <li class="">
            <a href="/monitoring/quick-start/">Quick Start</a>
            
        </li>
    
    
    
    
        <li class="active">
            <a href="/monitoring/guide/">Guide</a>
            
                
                    <ul>
                        
                        
                        <li class=""><a href="/monitoring/guide/installation/">Installation</a></li>
                        
                        
                        <li class="active"><a href="/monitoring/guide/configuration/">Configuration</a></li>
                        
                        
                        <li class=""><a href="/monitoring/guide/notifications/">Notification</a></li>
                        
                        
                        <li class=""><a href="/monitoring/guide/issue-dashboard/">Issue dashboard</a></li>
                        
                        
                        <li class=""><a href="/monitoring/guide/transaction-tracing/">Transaction tracing</a></li>
                        
                        
                        <li class=""><a href="/monitoring/guide/memory-cpu-profiling/">Memory & CPU Profiling</a></li>
                        
                    </ul>
                
            
        </li>
    
    
    
    
        <li class="">
            <a href="/monitoring/integration/">Integration</a>
            
                
            
        </li>
    
    
    
    
        <li class="">
            <a href="/monitoring/reference/">References</a>
            
        </li>
    
    </ul>

    </div>
</aside>

        <section class="content">
            <div class="markdown-section gettings_started_block topBlock">
    <p style="display: initial;">Getting started with PM2<span class="runtime_block gettings_started_block_span">Runtime</span><span class="monitoring_block gettings_started_block_span">Monitoring</span><span class="enterprise_block gettings_started_block_span">Enterprise</span></p>
</div>
            <article id="main" class="markdown-section">
                 <h1 id="configuration">Configuration</h1>

<p>Your dashboard comes with a lot of metrics without configuration.</p>

<p>However, a further configuration can be done using the <strong>PMX library</strong>. This is a lightweight library for advanced interaction between your server and the dashboard.</p>

<ul>
  <li><strong>Expose custom metrics</strong> to enrich your dashboard</li>
  <li><strong>Expose custom actions</strong> remotely triggerable from anywhere</li>
  <li><strong>Emit events</strong> to track anything you want</li>
  <li><strong>Refine exception detection</strong> to detect even caught</li>
</ul>

<hr />

<h2 id="pmx-installation">PMX installation</h2>

<p>With npm:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install pmx <span class="nt">--save</span>
</code></pre></div></div>

<p>With yarn:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add pmx
</code></pre></div></div>

<hr />

<h2 id="pmx-intialisation">PMX intialisation</h2>

<p>Load and initialize pmx at the top level of your application, before any other <code class="highlighter-rouge">require</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">pmx</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'pmx'</span><span class="p">).</span><span class="nx">init</span><span class="p">({</span>
    <span class="c1">// Enable the exception reporting, default true</span>
    <span class="na">errors</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="c1">// Enable the transaction tracing, default false</span>
    <span class="na">transactions</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="c1">// Enable the profiling, default true</span>
    <span class="na">profiling</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">})</span>
</code></pre></div></div>

<p>?&gt; See additional intialisation options in the <a href="/monitoring/reference/pmx.md">reference</a>.</p>

<hr />

<h2 id="expose-custom-metrics">Expose custom metrics</h2>

<p>pmx gives you a probe constructor giving you the ability to expose variable value to the dashboard.</p>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">probe</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'pmx'</span><span class="p">).</span><span class="nx">probe</span><span class="p">();</span>

<span class="kd">let</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">metric</span> <span class="o">=</span> <span class="nx">probe</span><span class="p">.</span><span class="nx">metric</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'Online users'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'custom/users'</span><span class="p">,</span> <span class="c1">// unique id that identify the metric</span>
  <span class="na">unit</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// value of the metric that will be displayed on the dashboard</span>
  <span class="na">agg_type</span><span class="p">:</span> <span class="s1">'avg'</span><span class="p">,</span> <span class="c1">// This param is optionnal, it can be `sum`, `max`, `min`, `avg` (default) or `none`. It will impact the way the probe data are aggregated. Use `none` if this is irrelevant (eg: constant or string value).</span>
  <span class="na">value</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">counter</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="kd">const</span> <span class="nx">metric</span> <span class="o">=</span> <span class="nx">probe</span><span class="p">.</span><span class="nx">metric</span><span class="p">({</span>
  <span class="na">name</span>    <span class="p">:</span> <span class="s1">'Realtime user'</span><span class="p">,</span>
  <span class="na">value</span>   <span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">users</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Note that the custom metric value is sent every second, occuring a call of the function you have given.</p>

<p>?&gt; Read more about exposing custom metrics in the <a href="/monitoring/reference/pmx-api">PMX reference</a>.</p>

<hr />

<h2 id="expose-remote-action">Expose remote action</h2>

<p>You can remotely trigger functions directly from your dashboard. After having been exposed from your code, action buttons can be found in the main dashboard page under in a dedicated section.</p>

<p>The action command takes a function as a parameter that needs to be called once the job is finished.</p>

<p>Example:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">pmx</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'pmx'</span><span class="p">);</span>

<span class="nx">pmx</span><span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="s1">'db:clean'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reply</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">clean</span><span class="p">.</span><span class="nx">db</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="cm">/**
     * reply() must be called at the end of the action
     */</span>
     <span class="nx">reply</span><span class="p">({</span><span class="na">success</span> <span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>?&gt; Read more about exposing remote actions in the <a href="/monitoring/reference/pmx-api">PMX reference</a>.</p>

<hr />

<h2 id="emit-events">Emit Events</h2>

<p>Emit events to get an history or statistics.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">pmx</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'pmx'</span><span class="p">)</span>

<span class="nx">pmx</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">'user:register'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">user</span><span class="p">:</span> <span class="s1">'Alex registered'</span><span class="p">,</span>
  <span class="na">email</span><span class="p">:</span> <span class="s1">'thorustor@gmail.com'</span>
<span class="p">})</span>
</code></pre></div></div>

<p>?&gt; Read more about emitting events in the <a href="/monitoring/reference/pmx-api">PMX reference</a>.</p>

<hr />

<h2 id="next-steps">Next steps</h2>

<p><a href="monitoring/guide/notifications.md">Notifications</a></p>

<hr />

<h2 id="questions-">Questions ?</h2>

<p>We are always happy to help with questions you might have. Search our documentation or check out answers to common questions. You can also post questions or comments to our community forum. You can also have a look at our support github https://github.com/keymetrics/keymetrics-support</p>


            </article>

        <article class="markdown-section copyright">
    <p>© 2018 Keymetrics</p>
    <ul id="footer">
        <li><a href="javascript:void(0);">Terms of Use</a></li>
        <li><a href="javascript:void(0);">Privacy Policy</a></li>

        <!-- Adds links to other languages on the post -->
        
          
        
          
            
              <li><p class="footer-list">Language: <a href="/ch/monitoring/guide/configuration/" >Chinese (中文版)</a></p></li>
            

            

            

          
        
    </ul>
</article>

        </section>

    </main>
</body>
    <script>window.$docsify = {"basePath":"/docs","alias":{"/runtime/.*/_sidebar.md":"/runtime/_sidebar.md","/monitoring/.*/_sidebar.md":"/monitoring/_sidebar.md","/enterprise/.*/_sidebar.md":"/enterprise/_sidebar.md"},"auto2top":true,"coverpage":false,"executeScript":true,"loadSidebar":"_sidebar.md","loadNavbar":false,"mergeNavbar":false,"subMaxLevel":1,"name":"","search":false,"plugins":[],"routerMode":"history"}</script>
<!-- <script src="//unpkg.com/docsify/lib/docsify.min.js"></script> -->
<!-- <script src="/assets/js/docsify.js"></script> -->
<script src="/assets/js/scripts.js" type="text/javascript"></script>
<script src="https://unpkg.com/clipboard@2.0.0/dist/clipboard.min.js" type="text/javascript"></script>
<script src="https://unpkg.com/prismjs@1.13.0/prism.js" type="text/javascript"></script>
<script src="https://unpkg.com/prismjs/components/prism-bash.min.js" type="text/javascript"></script>
<script src="https://unpkg.com/prismjs/components/prism-markdown.min.js" type="text/javascript"></script>
<script src="https://unpkg.com/prismjs/components/prism-nginx.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.10.0/js/md5.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="/assets/js/prism-clipboard.js" type="text/javascript"></script>
<!-- <script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script> -->
<!-- <script src="/assets/js/gittalk.js"></script> -->
<script src="/assets/js/keymetrics-plugins.js" type="text/javascript"></script>
<script src="/assets/js/additional.js" type="text/javascript"></script>
</html>
